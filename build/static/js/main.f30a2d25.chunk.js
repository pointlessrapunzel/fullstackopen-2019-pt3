(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,t,n){e.exports=n(37)},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),u=n.n(o),c=n(2),l=function(e){var t=e.value,n=e.onChange;return r.a.createElement("div",null,"filter shown with",r.a.createElement("input",{type:"text",value:t,onChange:n}))},i=function(e){var t=e.person,n=e.removePerson;return r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.number),r.a.createElement("td",null,r.a.createElement("button",{type:"button",onClick:n(t.id)},"delete")))},m=function(e){var t=e.persons,n=e.removePerson;return r.a.createElement("div",null,r.a.createElement("h2",null,"Numbers"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Number"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(i,{key:e.id,person:e,removePerson:n})})))))},d=function(e){var t=e.onSubmit,n=e.inputAttributes,a=Object(c.a)(n,4),o=a[0],u=a[1],l=a[2],i=a[3];return r.a.createElement("div",null,r.a.createElement("h2",null,"Add a new"),r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"name: ",r.a.createElement("input",{type:"text",value:o,onChange:u})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{type:"text",value:l,onChange:i})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},f=n(3),s=n.n(f),b="/api/persons",p=function(){return s.a.get(b).then((function(e){return e.data}))},h=function(e){return s.a.post(b,e).then((function(e){return e.data}))},v=function(e){return s.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},E=function(e,t){return s.a.put("".concat(b,"/").concat(e),t).then((function(e){return e.data}))},g=function(e){var t=e.message,n=e.type;if(null===t)return null;var a={maxWidth:600,fontSize:20,background:"lightgray",borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return"success"===n&&(a.color="green"),"danger"===n&&(a.color="red"),"warning"===n&&(a.color="#FF5522"),r.a.createElement("div",{style:a},t)},y=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],u=Object(a.useState)(""),i=Object(c.a)(u,2),f=i[0],s=i[1],b=Object(a.useState)(""),y=Object(c.a)(b,2),w=y[0],x=y[1],j=Object(a.useState)(""),O=Object(c.a)(j,2),k=O[0],C=O[1],S={text:null,type:null},P=Object(a.useState)(S),A=Object(c.a)(P,2),I=A[0],L=A[1],N=function(){setTimeout((function(){L(S)}),5e3)};Object(a.useEffect)((function(){p().then((function(e){return o(e)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(g,{message:I.text,type:I.type}),r.a.createElement("div",{className:"phonebook"},r.a.createElement(l,{value:k,onChange:function(e){C(e.target.value)}}),r.a.createElement(d,{onSubmit:function(e){e.preventDefault();var t={name:f.trim(),number:w.trim()},a=function(e){return n.find((function(t){return t.name.toLowerCase()===e.trim().toLowerCase()}))};f&&w?a(f)?window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?"))&&E(a(f).id,t).then((function(e){L({text:"".concat(e.name,"'s number has been changed"),type:"warning"}),N(),o(n.map((function(t){return t.id!==e.id?t:e}))),s(""),x("")})).catch((function(){L({text:"Information of ".concat(t.name," has already been removed from server"),type:"danger"}),o(n.filter((function(e){return e.name!==t.name}))),N()})):h(t).then((function(e){o(n.concat(e)),L({text:"Added ".concat(e.name),type:"success"}),N(),s(""),x("")})).catch((function(e){L({text:e.response.data.error,type:"danger"}),N()})):alert("You have to enter a name and a number!")},inputAttributes:[f,function(e){s(e.target.value)},w,function(e){x(e.target.value)}]}),r.a.createElement(m,{persons:k?n.filter((function(e){return e.name.toLowerCase().includes(k.trim().toLowerCase())})):n,removePerson:function(e){return function(){v(e).then((function(){var t=n.find((function(t){return t.id===e})).name;L({text:"Information of ".concat(t," has been deleted"),type:"danger"}),o(n.filter((function(t){return t.id!==e}))),N()})).catch((function(){var t=n.find((function(t){return t.id===e})).name;L({text:"Information of ".concat(t," has already been removed from server"),type:"danger"}),o(n.filter((function(t){return t.id!==e}))),N()}))}}})))};n(36);u.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.f30a2d25.chunk.js.map